<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SALA 6 - Subir Nueva Noticia</title>
    <!-- Incluye Tailwind CSS para un estilo rápido y responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define la fuente Inter para todo el documento */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos para el spinner de carga */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #3b82f6; /* Tailwind blue-500 */
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Estilos para el encabezado con imagen de fondo */
        .header-bg {
            background-image: url('http://googleusercontent.com/file_content/5'); /* Default image */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            overflow: hidden;
            height: 400px; /* Altura fija para el encabezado */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }
        .header-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.4); /* Capa oscura semitransparente */
            z-index: 1;
        }
        .header-top {
            position: relative;
            z-index: 2;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
        }
        .header-center-title {
            position: relative;
            z-index: 2;
            text-align: center;
            flex-grow: 1; /* Permite que el título central ocupe espacio */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding-bottom: 2rem; /* Espacio para el subtítulo */
        }
        .header-bottom-text {
            position: relative;
            z-index: 2;
            width: 100%;
            text-align: center;
            padding-bottom: 1.5rem;
            font-size: 1.125rem; /* text-lg */
            font-weight: 500; /* medium */
        }
        .header-logo-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .header-logo {
            height: 2.5rem; /* h-10 */
            width: 2.5rem; /* w-10 */
            border-radius: 9999px; /* rounded-full */
            object-fit: cover;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #3b82f6; /* Tailwind blue-500 */
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 0.5rem;
            top: 100%; /* Posiciona debajo del elemento padre */
            left: 0;
            padding: 0.5rem 0;
        }
        .dropdown-content a {
            color: white;
            padding: 0.75rem 1rem;
            text-decoration: none;
            display: block;
            text-align: left;
        }
        .dropdown-content a:hover {
            background-color: #2563eb; /* Tailwind blue-600 */
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">
    <!-- Contenedor principal para centrar el contenido y añadir padding -->
    <div class="container mx-auto px-4 py-8 md:px-6 lg:px-8 max-w-4xl bg-white shadow-lg rounded-xl my-8">

        <!-- Sección de Encabezado -->
        <header class="mb-12 rounded-lg shadow-md header-bg" id="main-header">
            <div class="header-overlay"></div>
            <div class="header-top">
                <div class="header-logo-container">
                    <img src="http://googleusercontent.com/file_content/3" alt="Logo Sala 6" class="header-logo" id="header-logo-display">
                    <!-- <span class="text-2xl font-bold">Sala 6</span> ELIMINADO -->
                </div>
                <nav>
                    <ul class="flex space-x-6 text-lg">
                        <li class="relative dropdown">
                            <a href="index.html" class="hover:text-blue-400 transition-colors duration-200 flex items-center">
                                Inicio
                                <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </a>
                            <div class="dropdown-content">
                                <a href="archive.html">Archivo de Noticias</a>
                                <a href="upload.html">Subir Nota</a>
                            </div>
                        </li>
                        <li><a href="about.html" class="hover:text-blue-400 transition-colors duration-200">Acerca de Nosotros</a></li>
                    </ul>
                </nav>
            </div>
            <div class="header-center-title">
                <h1 class="text-6xl md:text-7xl font-extrabold">Sala 6</h1>
            </div>
            <div class="header-bottom-text">
                <p>EL MEJOR LUGAR PARA TUS NOTICIAS DE CINE.</p>
            </div>
        </header>

        <!-- Sección para añadir una nueva nota -->
        <main class="space-y-10">
            <section id="upload-section" class="p-6 bg-blue-50 rounded-lg shadow-md hidden">
                <h2 class="text-3xl font-bold text-blue-800 mb-6 text-center">Añadir Nueva Noticia</h2>
                <form id="add-note-form" class="space-y-4 mb-10">
                    <div>
                        <label for="note-title" class="block text-sm font-medium text-gray-700">Título de la Noticia</label>
                        <input type="text" id="note-title" name="title" required
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="note-summary" class="block text-sm font-medium text-gray-700">Resumen (para la página principal)</label>
                        <textarea id="note-summary" name="summary" rows="3" required
                                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>
                    </div>
                    <div>
                        <label for="note-content" class="block text-sm font-medium text-gray-700">Contenido Completo de la Noticia</label>
                        <textarea id="note-content" name="content" rows="6" required
                                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>
                    </div>
                    <div>
                        <label for="note-image-file" class="block text-sm font-medium text-gray-700">Subir Imagen (solo una para la noticia)</label>
                        <input type="file" id="note-image-file" name="imageFile" accept="image/*"
                               class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                    </div>
                    <div>
                        <label for="note-youtube-url" class="block text-sm font-medium text-gray-700">URL de Video de YouTube</label>
                        <input type="text" id="note-youtube-url" name="youtubeUrl"
                               class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                               placeholder="Ej: https://www.youtube.com/watch?v=VIDEO_ID">
                    </div>
                    <button type="submit" id="submit-note-button" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md shadow-lg transition duration-300 ease-in-out">
                        Publicar Noticia
                    </button>
                    <span id="note-upload-status" class="ml-4 text-sm text-gray-600 hidden"></span>
                </form>

                <hr class="my-8 border-t border-gray-300">

                <!-- Sección de Configuración del Sitio -->
                <h2 class="text-3xl font-bold text-blue-800 mb-6 text-center">Configuración del Sitio</h2>
                <form id="site-settings-form" class="space-y-4">
                    <div>
                        <label for="header-bg-upload" class="block text-sm font-medium text-gray-700">Imagen de Fondo del Encabezado</label>
                        <input type="file" id="header-bg-upload" name="headerBg" accept="image/*"
                               class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        <span id="header-bg-status" class="ml-4 text-sm text-gray-600 hidden"></span>
                    </div>
                    <div>
                        <label for="header-logo-upload" class="block text-sm font-medium text-gray-700">Logo Superior Izquierdo del Encabezado</label>
                        <input type="file" id="header-logo-upload" name="headerLogo" accept="image/*"
                               class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        <span id="header-logo-status" class="ml-4 text-sm text-gray-600 hidden"></span>
                    </div>
                    <div>
                        <label for="footer-logo-upload" class="block text-sm font-medium text-gray-700">Logo del Pie de Página (abajo de "SALA 6")</label>
                        <input type="file" id="footer-logo-upload" name="footerLogo" accept="image/*"
                               class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                        <span id="footer-logo-status" class="ml-4 text-sm text-gray-600 hidden"></span>
                    </div>
                    <button type="submit" id="submit-settings-button" class="inline-block bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-md shadow-lg transition duration-300 ease-in-out">
                        Actualizar Configuración del Sitio
                    </button>
                    <span id="settings-upload-status" class="ml-4 text-sm text-gray-600 hidden"></span>
                </form>

                <button id="logout-button" class="mt-8 w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-md shadow-lg transition duration-300 ease-in-out">
                    Cerrar Sesión
                </button>
            </section>
            <div id="auth-message" class="text-center text-xl text-gray-700 p-8 hidden">
                <p>Necesitas iniciar sesión para acceder a esta página.</p>
                <a href="login.html" class="inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md shadow-lg transition duration-300 ease-in-out">
                    Ir a Iniciar Sesión
                </a>
            </div>
            <div id="loading-spinner" class="flex justify-center items-center py-10">
                <div class="spinner"></div>
                <p class="ml-3 text-gray-600">Verificando acceso...</p>
            </div>
        </main>

        <!-- Sección de Pie de Página -->
        <footer class="mt-12 pt-6 bg-gray-200 text-gray-800 text-sm rounded-xl py-8 px-6 flex flex-col md:flex-row justify-between items-start space-y-8 md:space-y-0 md:space-x-8">
            <!-- Left Section: Logo and Title -->
            <div class="flex flex-col items-center md:items-start md:w-1/4">
                <h2 class="text-4xl font-extrabold mb-4">SALA 6</h2>
                <img src="http://googleusercontent.com/file_content/3" alt="Logo SALA 6" class="h-24 mb-4 rounded-lg shadow-md" id="footer-logo-display">
            </div>

            <!-- Middle Section: Explore and Follow Us -->
            <div class="flex flex-col md:flex-row md:w-1/2 justify-around space-y-8 md:space-y-0 md:space-x-8">
                <div class="flex flex-col items-center md:items-start">
                    <h3 class="font-bold text-lg mb-4">Explora</h3>
                    <ul class="space-y-2 text-center md:text-left">
                        <li><a href="about.html" class="hover:underline">Acerca de nosotros</a></li>
                        <li><a href="#" class="hover:underline">Contacto</a></li>
                    </ul>
                </div>
                <div class="flex flex-col items-center md:items-start">
                    <h3 class="font-bold text-lg mb-4">Síguenos</h3>
                    <ul class="space-y-2 text-center md:text-left">
                        <li><a href="https://x.com/Sala_6_" target="_blank" class="hover:underline">X (Twitter)</a></li>
                        <!-- Add other social media links as needed -->
                    </ul>
                </div>
            </div>

            <!-- Right Section: Newsletter Signup -->
            <div class="flex flex-col items-center md:items-end md:w-1/4 text-center md:text-right">
                <p class="mb-4">Regístrate con tu dirección de correo electrónico para recibir noticias y actualizaciones.</p>
                <div class="flex flex-col space-y-2 w-full max-w-sm">
                    <input type="email" id="newsletter-email-upload" placeholder="Correo electrónico"
                           class="flex-grow px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-gray-900">
                    <button id="newsletter-signup-button-upload" class="bg-gray-800 hover:bg-gray-900 text-white font-bold py-2 px-4 rounded-md shadow-lg transition duration-300 ease-in-out">
                        REGISTRARSE
                    </button>
                </div>
                <p id="newsletter-message-upload" class="text-sm mt-2 hidden"></p>
            </div>
        </footer>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, doc, setDoc, getDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-storage.js";

        // Variables globales para Firebase
        let app;
        let db;
        let auth;
        let userId;
        let storage; // Variable para Firebase Storage

        // Configuración de Firebase
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? initialAuthToken : null;

        // Función para inicializar Firebase y verificar autenticación
        async function initializeFirebase() {
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                storage = getStorage(app); // Inicializar Firebase Storage

                // Autenticar anónimamente si no hay token inicial
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                // Verificar el estado de autenticación del usuario
                onAuthStateChanged(auth, (user) => {
                    document.getElementById('loading-spinner').classList.add('hidden'); // Ocultar spinner

                    // Solo permite acceso si el usuario NO es anónimo (es decir, ha iniciado sesión con email/password)
                    if (user && !user.isAnonymous) {
                        userId = user.uid;
                        console.log("Usuario autenticado para subir notas:", userId);
                        document.getElementById('upload-section').classList.remove('hidden');
                        document.getElementById('auth-message').classList.add('hidden');
                        loadSiteSettings(); // Cargar la configuración del sitio al iniciar sesión
                    } else {
                        console.log("Usuario no autenticado o anónimo. Redirigiendo a login.");
                        document.getElementById('upload-section').classList.add('hidden');
                        document.getElementById('auth-message').classList.remove('hidden');
                        // Opcional: Redirigir directamente si prefieres
                        // window.location.href = 'login.html';
                    }
                });

            } catch (error) {
                console.error("Error al inicializar Firebase o verificar autenticación:", error);
                document.getElementById('loading-spinner').classList.add('hidden');
                document.getElementById('auth-message').innerHTML = `<p class="text-red-500">Error al verificar el acceso. Por favor, inténtalo de nuevo.</p><a href="login.html" class="inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md shadow-lg transition duration-300 ease-in-out">Ir a Iniciar Sesión</a>`;
                document.getElementById('auth-message').classList.remove('hidden');
            }
        }

        // Función para cargar la configuración del sitio (para mostrar en el encabezado y pie de página)
        function loadSiteSettings() {
            if (!db) {
                console.warn("Firestore not ready to load site settings.");
                return;
            }
            const siteSettingsDocRef = doc(db, `artifacts/${appId}/public/data/site_settings/global`);

            onSnapshot(siteSettingsDocRef, (docSnap) => {
                const mainHeader = document.getElementById('main-header');
                const headerLogoDisplay = document.getElementById('header-logo-display');
                const footerLogoDisplay = document.getElementById('footer-logo-display');

                if (docSnap.exists()) {
                    const settings = docSnap.data();
                    if (settings.headerBgUrl && mainHeader) {
                        mainHeader.style.backgroundImage = `url('${settings.headerBgUrl}')`;
                    }
                    if (settings.headerLogoUrl && headerLogoDisplay) {
                        headerLogoDisplay.src = settings.headerLogoUrl;
                    }
                    if (settings.footerLogoUrl && footerLogoDisplay) {
                        footerLogoDisplay.src = settings.footerLogoUrl;
                    }
                } else {
                    console.log("No site settings found. Using default images.");
                    // Fallback to default images if no settings are found
                    if (mainHeader) mainHeader.style.backgroundImage = `url('http://googleusercontent.com/file_content/5')`;
                    if (headerLogoDisplay) headerLogoDisplay.src = 'http://googleusercontent.com/file_content/3';
                    if (footerLogoDisplay) footerLogoDisplay.src = 'http://googleusercontent.com/file_content/3';
                }
            }, (error) => {
                console.error("Error loading site settings:", error);
            });
        }


        // Función para subir un archivo a Firebase Storage
        async function uploadFile(file, path, statusElement) {
            if (!file) return null;

            statusElement.classList.remove('hidden');
            statusElement.textContent = `Subiendo ${file.name}...`;

            const storageRef = ref(storage, path);
            const uploadTask = uploadBytesResumable(storageRef, file);

            return new Promise((resolve, reject) => {
                uploadTask.on('state_changed',
                    (snapshot) => {
                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                        statusElement.textContent = `Subiendo ${file.name}: ${progress.toFixed(0)}%`;
                    },
                    (error) => {
                        console.error(`Error al subir ${file.name}:`, error);
                        statusElement.textContent = `Error al subir ${file.name}.`;
                        reject(error);
                    },
                    async () => {
                        const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);
                        statusElement.textContent = `${file.name} subido.`;
                        resolve(downloadURL);
                    }
                );
            });
        }

        // Manejar el envío del formulario de añadir nueva noticia
        document.getElementById('add-note-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!db || !userId || !storage) {
                console.error("Firebase no está completamente inicializado.");
                alert('Error: La aplicación no está lista. Inténtalo de nuevo.');
                return;
            }

            const title = document.getElementById('note-title').value;
            const summary = document.getElementById('note-summary').value;
            const content = document.getElementById('note-content').value;
            const imageFile = document.getElementById('note-image-file').files[0]; // Obtener el archivo de la noticia
            const youtubeUrl = document.getElementById('note-youtube-url').value;

            const submitButton = document.getElementById('submit-note-button');
            const uploadStatus = document.getElementById('note-upload-status');

            submitButton.disabled = true; // Deshabilitar el botón al iniciar el proceso
            uploadStatus.classList.remove('hidden');
            uploadStatus.textContent = 'Publicando noticia...';

            let imageUrls = []; // Array para almacenar la URL de la imagen de la noticia

            try {
                if (imageFile) {
                    const downloadURL = await uploadFile(imageFile, `news_images/${Date.now()}_${imageFile.name}`, uploadStatus);
                    if (downloadURL) {
                        imageUrls.push(downloadURL);
                    }
                }

                // Añadir la noticia a Firestore
                await addDoc(collection(db, `artifacts/${appId}/public/data/news`), {
                    title: title,
                    summary: summary,
                    content: content,
                    imageUrls: imageUrls, // Ahora contendrá la URL de la imagen subida o estará vacío
                    youtubeUrl: youtubeUrl,
                    createdAt: new Date() // Marca de tiempo para ordenar
                });

                alert('Noticia publicada con éxito, Poncho!'); // Usar un modal personalizado en un entorno real
                document.getElementById('add-note-form').reset(); // Limpiar el formulario
                uploadStatus.textContent = ''; // Limpiar el estado
                uploadStatus.classList.add('hidden');
            } catch (e) {
                console.error("Error al publicar la noticia: ", e);
                alert('Error al publicar la noticia.'); // Usar un modal personalizado
                uploadStatus.textContent = 'Error al publicar.';
            } finally {
                submitButton.disabled = false; // Habilitar el botón al finalizar (éxito o error)
            }
        });

        // Manejar el envío del formulario de configuración del sitio
        document.getElementById('site-settings-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            if (!db || !storage) {
                console.error("Firebase no está completamente inicializado para la configuración del sitio.");
                alert('Error: La aplicación no está lista para actualizar la configuración.');
                return;
            }

            const headerBgFile = document.getElementById('header-bg-upload').files[0];
            const headerLogoFile = document.getElementById('header-logo-upload').files[0];
            const footerLogoFile = document.getElementById('footer-logo-upload').files[0];

            const submitButton = document.getElementById('submit-settings-button');
            const settingsUploadStatus = document.getElementById('settings-upload-status');

            submitButton.disabled = true;
            settingsUploadStatus.classList.remove('hidden');
            settingsUploadStatus.textContent = 'Actualizando configuración...';

            let siteSettings = {};

            try {
                if (headerBgFile) {
                    const url = await uploadFile(headerBgFile, `site_assets/header_background.jpg`, document.getElementById('header-bg-status'));
                    if (url) siteSettings.headerBgUrl = url;
                }
                if (headerLogoFile) {
                    const url = await uploadFile(headerLogoFile, `site_assets/header_logo.png`, document.getElementById('header-logo-status'));
                    if (url) siteSettings.headerLogoUrl = url;
                }
                if (footerLogoFile) {
                    const url = await uploadFile(footerLogoFile, `site_assets/footer_logo.png`, document.getElementById('footer-logo-status'));
                    if (url) siteSettings.footerLogoUrl = url;
                }

                // Actualizar el documento de configuración del sitio en Firestore
                const siteSettingsDocRef = doc(db, `artifacts/${appId}/public/data/site_settings/global`);
                await setDoc(siteSettingsDocRef, siteSettings, { merge: true }); // Usar merge para no sobrescribir todo

                alert('Configuración del sitio actualizada con éxito, Poncho!');
                document.getElementById('site-settings-form').reset();
                settingsUploadStatus.textContent = 'Configuración actualizada.';
                document.getElementById('header-bg-status').classList.add('hidden');
                document.getElementById('header-logo-status').classList.add('hidden');
                document.getElementById('footer-logo-status').classList.add('hidden');
            } catch (e) {
                console.error("Error al actualizar la configuración del sitio: ", e);
                alert('Error al actualizar la configuración del sitio.');
                settingsUploadStatus.textContent = 'Error al actualizar.';
            } finally {
                submitButton.disabled = false;
            }
        });


        // Función para cerrar sesión
        document.getElementById('logout-button').addEventListener('click', async () => {
            try {
                await signOut(auth);
                alert('Sesión cerrada, Poncho. ¡Hasta pronto!');
                window.location.href = 'index.html'; // Redirigir a la página principal
            } catch (error) {
                console.error("Error al cerrar sesión:", error);
                alert('Error al cerrar sesión.');
            }
        });

        // Script para el formulario de suscripción del pie de página
        document.getElementById('newsletter-signup-button-upload').addEventListener('click', () => {
            const emailInput = document.getElementById('newsletter-email-upload');
            const email = emailInput.value;
            const messageElement = document.getElementById('newsletter-message-upload');

            if (email && email.includes('@') && email.includes('.')) {
                messageElement.textContent = '¡Gracias por registrarte!';
                messageElement.classList.remove('hidden', 'text-red-500');
                messageElement.classList.add('text-green-600');
                emailInput.value = ''; // Limpiar el input
                console.log('Suscripción al boletín:', email);
            } else {
                messageElement.textContent = 'Por favor, introduce un correo electrónico válido.';
                messageElement.classList.remove('hidden', 'text-green-600');
                messageElement.classList.add('text-red-500');
            }
        });

        // Inicializar Firebase cuando la ventana cargue
        window.onload = initializeFirebase;
    </script>
</body>
</html>




